
%<>%

Đây là một "pipe gán" từ package **magrittr**, package này sẽ *gán một đối tượng theo chiều tiến lên và cũng định nghĩa lại đối tượng*. Pipe gán phải là toán tử đầu tiên trong chuỗi pipe code. Đây là cách viết ngắn gọn, như được trình bày dưới đây là hai ví dụ tương đương với nhau:

```{r, eval=F}
linelist <- linelist %>% 
  mutate(age_months = age_years * 12)
```

Đoạn code bên trên tương đương với code dưới đây:

```{r, eval=F}
linelist %<>% mutate(age_months = age_years * 12)
```

%<+%

Toán tử này được sử dụng để thêm dữ liệu vào Cây phả hệ với package **ggtree**. Xem thêm chương [Cây phả hệ](phylogenetic_trees.vn.qmd) hoặc [Sách online này](https://yulab-smu.top/treedata-book/).

<!-- ======================================================= -->

### Toán tử quan hệ và logic {.unnumbered}

Toán tử quan hệ so sánh các giá trị và thường được sử dụng khi định nghĩa các biến mới và tập con của bộ dữ liệu. Dưới đây là các toán tử quan hệ phổ biến trong R:

| Ý nghĩa             | Toán tử  | Ví dụ      | Kết quả đầu ra của ví dụ                                                                                                                                 |
|---------------------|----------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| Bằng                | `==`     | `"A" == "a"` | `FALSE` (vì R phân biệt chữ hoa chữ thường) Lưu ý rằng *== (hai dấu bằng) khác với = (một dấu bằng), một dấu bằng hoạt động tương tự với toán tử gán `<-`* |

<!-- ======================================================= -->

### Lỗi và Cảnh báo {.unnumbered}

Khi một lệnh được thực thi, cửa sổ R Console có thể hiển thị cho bạn cảnh báo hoặc thông báo lỗi bằng văn bản màu đỏ.

-   Một **cảnh báo** nghĩa là R đã hoàn thành lệnh của bạn, nhưng phải thực hiện các bước bổ sung hoặc tạo ra kết quả bất thường mà bạn cần lưu ý.

-   Một **lỗi** nghĩa là R không thể hoàn thành lệnh của bạn.

Tìm manh mối:

-   Thông báo lỗi/cảnh báo thường sẽ bao gồm số dòng xảy ra sự cố.

-   Nếu một đối tượng "không xác định được (is unknown)" hoặc "không tìm thấy (not found)", có lẽ bạn đã viết sai chính tả, quên gọi một package bằng hàm library(), hoặc quên chạy lại tập lệnh của bạn sau khi thực hiện các thay đổi.

Nếu vẫn thất bại, hãy sao chép thông báo lỗi vào Google cùng với một số từ khóa chính - rất có thể ai đó cũng đã gặp lỗi này rồi!

<!-- ======================================================= -->

### Mẹo cú pháp chung {.unnumbered}

Một số điều cần nhớ khi viết lệnh trong R, để tránh lỗi và cảnh báo:

-   Luôn đóng dấu ngoặc đơn - mẹo: đếm số lần mở dấu ngoặc đơn "(" và đóng dấu ngoặc đơn ")" cho mỗi đoạn mã
-   Tránh để khoảng trắng trong tên cột và đối tượng. Thay vào đó, hãy sử dụng dấu gạch dưới (_) hoặc dấu chấm (.)
-   Theo dõi và nhớ tách các đối số của hàm bằng dấu phẩy
-   R phân biệt chữ hoa và chữ thường, nghĩa là `Variable_A` *khác* với `variable_A`

<!-- ======================================================= -->

### Trợ giúp viết code {.unnumbered}

Bất kỳ tập lệnh nào (RMarkdown hoặc những cái khác) sẽ cung cấp manh mối khi bạn mắc lỗi. Ví dụ: nếu bạn quên viết dấu phẩy ở vị trí cần thiết hoặc quên đóng dấu ngoặc đơn, RStudio sẽ treo cờ trên dòng đó, ở phía bên trái của script, để cảnh báo bạn.
